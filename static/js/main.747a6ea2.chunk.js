(this["webpackJsonpwca-projector"]=this["webpackJsonpwca-projector"]||[]).push([[0],{139:function(e){e.exports=JSON.parse('{"a":"0.2.0"}')},203:function(e,t,a){e.exports=a(219)},208:function(e,t,a){},219:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),i=(a(208),a(70)),l=a(71),s=a(75),u=a(72),m=a(76),f=a(36),d=a(61),p=a(269),g=a(221),E=a(173),h=a(271),v=a(66),b=a(136),y=a(32),O="https://www.worldcubeassociation.org",w=Object({NODE_ENV:"production",PUBLIC_URL:""}).WCA_CLIENT_ID,j=a(35),C=Object(j.a)();function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var S=function(e){return"WCA-Real-Time.".concat(w,".").concat(e)},k=function(){return localStorage.getItem(S("accessToken"))},x=function(){var e=new URLSearchParams({client_id:w,response_type:"token",redirect_uri:N(),scope:"public manage_competitions dob email"});window.location="".concat(O,"/oauth/authorize?").concat(e.toString())},N=function(){var e=window.location.origin;return console.log(e),new URLSearchParams(window.location.search).has("staging")?"".concat(e,"?staging=true"):e},P=function(){localStorage.removeItem(S("accessToken")),window.location.replace("/")},T=function(){return!!k()},D=a(89),A=a.n(D),G=a(137),W=a.n(G),U=a(135),M=Object(b.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1},title:{textDecoration:"none",color:"white",flexGrow:1,marginLeft:e.spacing(1)},titleIcon:{marginRight:e.spacing(2)},username:{marginRight:e.spacing(1)}}})),R=function(e){var t=e.setMobileOpen,a=e.userInfo,c=e.onSignOut,o=M();return r.a.createElement(p.a,{position:"sticky",color:"primary",className:o.appBar},r.a.createElement(h.a,{spacing:2,className:o.titleIcon},U.isMobile&&r.a.createElement(E.a,{onClick:t,className:o.titleIcon},r.a.createElement(W.a,{size:10})),r.a.createElement(A.a,null),r.a.createElement(v.a,{variant:"h6",className:o.title,component:f.b,to:"/"},"myComp"),a&&T()?r.a.createElement(n.Fragment,null,r.a.createElement(v.a,{variant:"subtitle1",className:o.username},a.name),r.a.createElement(g.a,{color:"inherit",onClick:c},"Hello, ",a.me.name)):r.a.createElement(g.a,{color:"inherit",onClick:x},"Sign in with the WCA")))},z=a(272),F=a(274),L=a(57),_=a.n(L),H=a(142),B=a.n(H),J=a(143),q=a.n(J),V=a(141),K=a.n(V),Y=a(139),Z=a(273),X=Object(b.a)((function(e){return{root:{position:"absolute",bottom:0,width:"100%",overflow:"hidden",padding:e.spacing(2)},grow:{flexGrow:1},link:{verticalAlign:"middle",fontWeight:500,"&:hover":{textDecoration:"none",opacity:.7}}}})),$=function(e){var t=e.currTheme,a=e.onThemeChange,n=X();return r.a.createElement(z.a,{container:!0,className:n.root},r.a.createElement(z.a,{item:!0,className:n.grow}),r.a.createElement(z.a,{item:!0},r.a.createElement(z.a,{container:!0,spacing:2},r.a.createElement(Z.a,{title:"Gitub"},r.a.createElement(z.a,{item:!0,key:"Github"},r.a.createElement(F.a,{className:n.link,variant:"body2",href:"https://github.com/saranshgrover/WCARealTime"},r.a.createElement(K.a,null)))),r.a.createElement(Z.a,{title:"Contact"},r.a.createElement(z.a,{item:!0,key:"Contact"},r.a.createElement(F.a,{className:n.link,variant:"body2",href:"mailto:ycubiksrube@gmail.com"},r.a.createElement(B.a,null)))),r.a.createElement(Z.a,{title:"light"===t?"Switch to Dark":"Switch to Light"},r.a.createElement(z.a,{item:!0,key:"Theme"},r.a.createElement(F.a,{className:n.link,variant:"body2",onClick:a},r.a.createElement(q.a,null)))),r.a.createElement(Z.a,{title:"About"},r.a.createElement(z.a,{item:!0,key:"Info"},r.a.createElement(F.a,{className:n.link,variant:"body2",href:"/about"},r.a.createElement(_.a,{size:20})))),r.a.createElement(z.a,{item:!0,key:"Version"},r.a.createElement(F.a,{className:n.link,variant:"body2",href:"https://github.com/saranshgrover/WCARealTime/releases"},Y.a)))))},Q=a(170),ee=a(306),te=a(305),ae=a(112),ne=a.n(ae),re=a(113),ce=a.n(re),oe=a(286),ie=a(144),le=a(8),se=a.n(le);function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(a,!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var fe=function e(t,a,n){var r=Object(ie.a)(a),c=r[0],o=r.slice(1);return 0===o.length?me({},t,Object(y.a)({},c,n(t[c]))):me({},t,Object(y.a)({},c,e(t[c],o,n)))},de=function(e,t,a){return fe(e,t,(function(e){return e&&e.map(a)}))},pe=function(e,t,a){return fe(e,t,(function(){return a}))},ge=function(e,t){return e>t?1:t>e?-1:0},Ee=function(e){return e.sort((function(e,t){return ge(new Date(e.start_date),new Date(t.start_date))}))},he=function(e,t){var a=se()();return a>=se()(e)&&a<=se()(t)?"Happening Now!":se()(e).isSame(new Date,"month")?"In ".concat(Math.floor(se.a.duration(se()(e).diff(a)).asDays())," Days!"):"".concat(se()(e).format("MMM Do")," - ").concat(se()(t).format("Do"))},ve=function(e){return we("/competitions/".concat(e,"/wcif/public"))},be=function(e){return we("/competitions/".concat(e,"/wcif"))},ye=function(e){return we("/users/".concat(e,"?upcoming_competitions=true"))},Oe=function(){var e=se()().startOf("day"),t=new URLSearchParams({managed_by_me:!0,start:e.toISOString()});return we("/competitions?".concat(t.toString()))},we=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat(O,"/api/v0");return fetch("".concat(a).concat(e),Object.assign({},t,{headers:new Headers({Authorization:"Bearer ".concat(k()),"Content-Type":"application/json"})})).then((function(e){if(!e.ok)throw new Error(e.statusText);return e})).then((function(e){return e.json()}))},je=function(e,t){var a,n,r,c=Object.keys(t).filter((function(a){return e[a]!==t[a]}));return 0===c.length?Promise.resolve():(a=t.id,r=t,n=c.reduce((function(e,t){return me({},e,Object(y.a)({},t,r[t]))}),{}),we("/competitions/".concat(a,"/wcif"),{method:"PATCH",body:JSON.stringify(n)}))},Ce=a(21),Ie=a(291),Se=a(310),ke=a(275),xe=a(276),Ne=a(277),Pe=a(278),Te=a(279),De=a(147),Ae=a.n(De),Ge=a(150),We=a.n(Ge),Ue=a(145),Me=a.n(Ue),Re=a(146),ze=a.n(Re),Fe=a(148),Le=a.n(Fe),_e=a(149),He=a.n(_e);function Be(e){var t=e.user,a=e.onClick,n=function(e){switch(e){case"Projector":return r.a.createElement(Me.a,null);case"Groups":return r.a.createElement(ze.a,null);case"Notifications":return r.a.createElement(Ae.a,null);case"Admin":return r.a.createElement(Le.a,null);case"Incidents":return r.a.createElement(He.a,null);default:return r.a.createElement(We.a,null)}};return r.a.createElement("div",{style:{marginTop:"15px"}},r.a.createElement(ke.a,null),r.a.createElement(xe.a,null,["Overview","Groups","Notifications"].map((function(e){return r.a.createElement(Ne.a,{button:!0,key:e,onClick:function(){return a(e)}},r.a.createElement(Pe.a,null,n(e)),r.a.createElement(Te.a,{primary:e}))}))),r.a.createElement(ke.a,null),"admin"===t&&r.a.createElement(xe.a,null,["Admin","Incidents"].map((function(e){return r.a.createElement(Ne.a,{button:!0,key:e,onClick:function(){return a(e)}},r.a.createElement(Pe.a,null,n(e)),r.a.createElement(Te.a,{primary:e}))}))))}function Je(){return r.a.createElement("div",null)}a(216);var qe=a(64);function Ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ve(a,!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ve(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ye=function(e){return"realtime.".concat(e)},Ze=function(e,t){return{id:Ye(e),specUrl:"http://localhost:3000/wcif-extensions/".concat(e,".json"),data:t}},Xe=function(e,t,a){var n=t.extensions.filter((function(t){return t.id!==Ye(e)}));return Ke({},t,{extensions:[].concat(Object(qe.a)(n),[Ze(e,a)])})},$e={GeneralConfig:{useProjector:!1,useGroups:!1,groupTool:"",useTelegramNotif:!1,logoLink:void 0,channelName:void 0},ScheduleConfig:{delay:0,currentActivity:void 0,pinnedMessage:void 0,groupUpdate:void 0}},Qe=function(e,t){var a=t.extensions.find((function(t){return t.id===Ye(e)})),n=$e[e];return null===n?a&&a.data:a?Ke({},n,{},a.data):n},et=function(e,t){return t.extensions.filter((function(t){return t.id===Ye(e)})).length>0};function tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function at(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tt(a,!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var nt=function(e,t){var a=/\d{4}[A-Z]{4}\d{2}/.test(e),n=t.persons.find((function(t){return a?t.wcaId===e:t.wcaUserId===parseInt(e)}));if(!n)return null;var r=n.assignments,c=t.schedule;return r.sort((function(e,t){return function(e,t,a){var n,r;return a.venues.forEach((function(a){return a.rooms.forEach((function(a){return a.activities.forEach((function(a){a.childActivities.forEach((function(a){a.id===e?n=new Date(a.startTime):a.id===t&&(r=new Date(a.startTime))}))}))}))})),n-r}(e.activityId,t.activityId,c)}))},rt=function(e,t){var a=t.persons.find((function(t){return t.wcaId===e.me.wca_id})).registration.eventIds,n=t.schedule;return a.sort((function(e,t){return ct(e,t,n)}))},ct=function(e,t,a){var n,r;return a.venues.forEach((function(a){return a.rooms.forEach((function(a){return a.activities.forEach((function(a){a.activityCode==="".concat(e,"-r1")?n=new Date(a.startTime):a.activityCode==="".concat(t,"-r1")&&(r=new Date(a.startTime))}))}))})),n-r},ot=function(e){var t=[],a=!0,n=!1,r=void 0;try{for(var c,o=e.venues[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var i=c.value,l=!0,s=!1,u=void 0;try{for(var m,f=i.rooms[Symbol.iterator]();!(l=(m=f.next()).done);l=!0){var d=m.value,p=!0,g=!1,E=void 0;try{for(var h,v=d.activities[Symbol.iterator]();!(p=(h=v.next()).done);p=!0){var b=h.value;t.push(at({},b,{room:d}));var y=!0,O=!1,w=void 0;try{for(var j,C=b.childActivities[Symbol.iterator]();!(y=(j=C.next()).done);y=!0){var I=j.value;t.push(at({},I,{room:d}))}}catch(S){O=!0,w=S}finally{try{y||null==C.return||C.return()}finally{if(O)throw w}}}}catch(S){g=!0,E=S}finally{try{p||null==v.return||v.return()}finally{if(g)throw E}}}}catch(S){s=!0,u=S}finally{try{l||null==f.return||f.return()}finally{if(s)throw u}}}}catch(S){n=!0,r=S}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}return t},it=function(e){switch(e){case"competitor":return"Compete";case"staff-judge":return"Judge";case"staff-runner":return"Run";case"staff-scrambler":return"Scramble";default:return"Assigned for"}},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,c=[],o=!0,i=!1,l=void 0;try{for(var s,u=function(){var n=s.value,o=r.find((function(e){return e.id===n.activityId}));e.includes(o.activityCode.slice(0,o.activityCode.indexOf("-")))||t.includes(o.room.id)||a.includes(n.assignmentCode)||c.push({startDate:o.startTime,endDate:o.endTime,title:"".concat(it(n.assignmentCode)," in ").concat(o.name),assignmentCode:n.assignmentCode,activity:o})},m=n[Symbol.iterator]();!(o=(s=m.next()).done);o=!0)u()}catch(f){i=!0,l=f}finally{try{o||null==m.return||m.return()}finally{if(i)throw l}}return c},st=function(e){return"".concat(mt[e.slice(0,e.indexOf("-"))]," Round ").concat(e[e.indexOf("-")+2]," ")},ut=function(e){return"Group ".concat(e.slice(e.lastIndexOf("-")+2))},mt={222:"2x2",333:"3x3",444:"4x4",555:"5x5",666:"6x6",777:"7x7",pyram:"Pyraminx","333oh":"3x3 One Handed","3bld":"3x3 Blindfolded","4bld":"4x4 Blindfolded",skewb:"Skewb",clock:"Clock","333ft":"3x3 with Feet","333mbf":"3x3 Multiple Blindfolded","333fm":"Fewest Moves",sq1:"Square 1",minx:"Megaminx"},ft=function(e,t){return t.find((function(t){return t.activityCode===e}))},dt=function(e,t){var a=[],n=[],r=t.persons,c=!0,o=!1,i=void 0;try{for(var l,s=r[Symbol.iterator]();!(c=(l=s.next()).done);c=!0){var u=l.value,m=!0,f=!1,d=void 0;try{for(var p,g=u.assignments[Symbol.iterator]();!(m=(p=g.next()).done);m=!0){var E=p.value;E.activityId===e&&("competitor"===E.assignmentCode?a.push(u):n.push(u))}}catch(h){f=!0,d=h}finally{try{m||null==g.return||g.return()}finally{if(f)throw d}}}}catch(h){o=!0,i=h}finally{try{c||null==s.return||s.return()}finally{if(o)throw i}}return[a,n]},pt=function(e,t){var a=t.slice(0,t.indexOf("-")),n=e.personalBests.find((function(e){return e.eventId===a}));return n?function(e){var t=e.toString();return"".concat(t.slice(0,-2),".").concat(t.slice(-2))}(n.best):""},gt=function(e){var t=[],a=!0,n=!1,r=void 0;try{for(var c,o=e.venues[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var i=c.value,l=!0,s=!1,u=void 0;try{for(var m,f=i.rooms[Symbol.iterator]();!(l=(m=f.next()).done);l=!0){var d=m.value;t[d.id]=parseInt(Qe("ScheduleConfig",d).delay)}}catch(p){s=!0,u=p}finally{try{l||null==f.return||f.return()}finally{if(s)throw u}}}}catch(p){n=!0,r=p}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}return t},Et=a(281),ht=a(82),vt=a(226),bt=a(282),yt=a(283),Ot=a(284),wt=a(285),jt=a(95),Ct=a.n(jt),It=a(151),St=a.n(It),kt=a(280),xt=a(319),Nt=a(93),Pt=a.n(Nt);function Tt(e){var t=e.message,a=Object(b.a)((function(e){return Object(xt.a)({root:{width:"100%",height:"100%",textAlign:"center",color:"light"===e.palette.type?e.palette.error.dark:e.palette.error.light},error:{fontSize:"50px"}})}))();return r.a.createElement(kt.a,null,r.a.createElement("div",{className:a.root},r.a.createElement(Pt.a,{className:a.error}),r.a.createElement(v.a,{variant:"h1"},"ERROR"),r.a.createElement(v.a,{variant:"subtitle1"},t)))}var Dt=Object(vt.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(3)},paper:{width:"100%",padding:e.spacing(2),marginBottom:e.spacing(3)},text:{margin:e.spacing(3)},table:{overflowX:"auto"},link:{color:e.palette.primary.light,textDecoration:"none"}}}));function At(e){var t=e.WCAID,a=e.match,n=e.userInfo,c=e.wcif;console.log(n);var o=a?a.params.wcaId:t||null,i=nt(o,c),l=c.persons.find((function(e){return e.wcaId===o||e.wcaUserId===parseInt(o)})),s=i&&lt([],[],[],i,ot(c.schedule)),u=Dt(),m=gt(c.schedule);return r.a.createElement(r.a.Fragment,null,null===i?r.a.createElement(Tt,{message:"Invalid ID"}):r.a.createElement(z.a,{item:!0,className:u.root,xs:12},r.a.createElement(v.a,{className:u.text,align:"center",variant:"h3",component:"h1"},l.name),r.a.createElement(v.a,{className:u.text,align:"center",variant:"h4",component:"h1"},l.wcaId),r.a.createElement(ht.a,{className:u.paper},c.schedule.venues.map((function(e){return e.rooms.map((function(e){return m[e.id]>0?r.a.createElement(z.a,{container:!0,spacing:2,key:e.id,alignItems:"center"},r.a.createElement(z.a,{item:!0},r.a.createElement(_.a,{style:{color:e.color},fontSize:"large"})),r.a.createElement(z.a,{item:!0},r.a.createElement(v.a,null,"".concat(e.name," is currently delayed by ").concat(m[e.id]," minute(s).")))):r.a.createElement(r.a.Fragment,{key:e.id})}))})),0===m.filter((function(e){return 0!==e})).length&&r.a.createElement(z.a,{container:!0,spacing:2,alignItems:"center"},r.a.createElement(z.a,{item:!0},r.a.createElement(St.a,{style:{color:"#00ff00"},fontSize:"large"})),r.a.createElement(z.a,{item:!0},r.a.createElement(v.a,null,"".concat(c.name," is running on schedule!"))))),r.a.createElement(ht.a,{className:u.paper},r.a.createElement(Et.a,{className:u.table},r.a.createElement(bt.a,null,r.a.createElement(yt.a,null,r.a.createElement(Ot.a,{size:"small"},r.a.createElement(v.a,null,"Time"," ")),r.a.createElement(Ot.a,null,r.a.createElement(v.a,null,"Event"," ")),r.a.createElement(Ot.a,{size:"small"},r.a.createElement(v.a,null,"Group"," ")),r.a.createElement(Ot.a,{size:"small"},r.a.createElement(v.a,null,"Activity"," ")),r.a.createElement(Ot.a,null,r.a.createElement(v.a,null,"Room"," ")))),r.a.createElement(wt.a,null,s&&s.map((function(e){return r.a.createElement(yt.a,{key:e.title},r.a.createElement(Ot.a,null,r.a.createElement(v.a,null,se()(e.startDate).tz(c.schedule.venues[0].timezone).format("hh:mm a"))),r.a.createElement(Ot.a,null,r.a.createElement(v.a,null,st(e.activity.activityCode))),r.a.createElement(Ot.a,null,r.a.createElement(f.b,{className:u.link,to:"/competitions/".concat(c.id,"/groups/").concat(e.activity.room.id,"/").concat(e.activity.activityCode)},r.a.createElement(v.a,null,ut(e.activity.activityCode)))),r.a.createElement(Ot.a,null,r.a.createElement(v.a,null,it(e.assignmentCode))),r.a.createElement(Ot.a,null,r.a.createElement(z.a,{container:!0,alignItems:"center"},r.a.createElement(z.a,{item:!0},r.a.createElement(v.a,null,e.activity.room.name)),r.a.createElement(z.a,{item:!0},r.a.createElement(Ct.a,{style:{fontSize:"50px",color:e.activity.room.color}})))))})))))))}var Gt=Object(b.a)((function(e){return{root:{width:"100%",margin:e.spacing(3)},link:{textDecoration:"none",color:e.palette.primary.light},top:{margin:"auto",backgroundColor:e.palette.primary.main},header:{backgroundColor:e.palette.secondary.main},text:{margin:e.spacing(3)},table:{margin:"auto",maxWidth:800}}}));function Wt(e){var t=e.match,a=(e.userInfo,e.wcif),c=t.params.activityCode,o=ft(c,ot(a.schedule)),i=Object(n.useState)(!0),l=Object(Ce.a)(i,2),s=l[0],u=l[1],m=Object(n.useState)([]),d=Object(Ce.a)(m,2),p=d[0],g=d[1];Object(n.useEffect)((function(){g(dt(ft(c,ot(a.schedule)).id,a)),u(!1)}),[c,a]);var h=Gt();return r.a.createElement(r.a.Fragment,null,s&&r.a.createElement(oe.a,null),!s&&p[0]&&r.a.createElement("div",{className:h.root},r.a.createElement(z.a,{container:!0,spacing:2,alignItems:"center",justify:"center"},r.a.createElement(z.a,{item:!0},r.a.createElement(Z.a,{disableFocusListener:!0,disableTouchListener:!0,placement:"top",title:"".concat(o.room.name)},r.a.createElement(E.a,null,r.a.createElement(Ct.a,{style:{color:o.room.color,fontSize:"60px"}})))),r.a.createElement(z.a,{item:!0},r.a.createElement(v.a,{className:h.text,align:"center",variant:"h4",component:"h1"},o.name))),r.a.createElement(Et.a,{size:"small",className:h.table},r.a.createElement(bt.a,null,r.a.createElement(yt.a,null,r.a.createElement(Ot.a,{className:h.top,align:"center",colSpan:5},r.a.createElement(v.a,null," Competitors "))),r.a.createElement(yt.a,{className:h.header},r.a.createElement(Ot.a,null,r.a.createElement(v.a,null,"Competitor")),r.a.createElement(Ot.a,null,r.a.createElement(v.a,null,"WCA ID")),r.a.createElement(Ot.a,null,r.a.createElement(v.a,null,"Seed Time")))),r.a.createElement(wt.a,null,p[0].map((function(e){return r.a.createElement(yt.a,{key:e.wcaUserId},r.a.createElement(Ot.a,null,r.a.createElement(f.b,{className:h.link,to:"/competitions/".concat(a.id,"/groups/").concat(e.wcaId?e.wcaId:e.wcaUserId)},r.a.createElement(v.a,null," ",e.name))),r.a.createElement(Ot.a,null,r.a.createElement(v.a,null,e.wcaId)),r.a.createElement(Ot.a,null,r.a.createElement(v.a,null,pt(e,o.activityCode))))}))),r.a.createElement(bt.a,null,r.a.createElement(yt.a,null,r.a.createElement(Ot.a,{className:h.top,align:"center",colSpan:5},r.a.createElement(v.a,null," Staff "))),r.a.createElement(yt.a,{className:h.header},r.a.createElement(Ot.a,null,r.a.createElement(v.a,null," Competitor ")),r.a.createElement(Ot.a,null,r.a.createElement(v.a,null," WCA ID ")),r.a.createElement(Ot.a,null,r.a.createElement(v.a,null," Duty ")))),r.a.createElement(wt.a,null,p[1].map((function(e){return r.a.createElement(yt.a,{key:e.wcaUserId},r.a.createElement(Ot.a,null,console.log(e),r.a.createElement(f.b,{className:h.link,to:"/competitions/".concat(a.id,"/groups/").concat(e.wcaId?e.wcaId:e.wcaUserId)},r.a.createElement(v.a,null,e.name))),r.a.createElement(Ot.a,null,r.a.createElement(v.a,null,e.wcaId)),r.a.createElement(Ot.a,null,r.a.createElement(v.a,null,it(e.assignments.find((function(e){return e.activityId===o.id})).assignmentCode))))}))))))}var Ut=a(309),Mt=a(315);function Rt(e){var t=e.wcif,a=t.persons,c=Object(n.useState)(a[0]),o=Object(Ce.a)(c,2),i=o[0],l=o[1];return r.a.createElement(z.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(z.a,{item:!0},r.a.createElement(Ut.a,{onChange:function(e,t){l(t)},options:a,getOptionLabel:function(e){return"".concat(e.name," ").concat(e.wcaId?"- ".concat(e.wcaId):"")},style:{width:300},value:i,renderInput:function(e){return r.a.createElement(Mt.a,Object.assign({},e,{label:"Competitor",variant:"outlined",fullWidth:!0}))}})),r.a.createElement(z.a,{item:!0},r.a.createElement(At,{WCAID:i.wcaId?i.wcaId:i.wcaUserId,userInfo:i,wcif:t})))}function zt(e){var t=e.user,a=e.wcif,n=e.userInfo;return console.log(n),r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/competitions/".concat(a.id,"/groups/:roomId/:activityCode"),render:function(e){return r.a.createElement(Wt,Object.assign({},e,{wcif:a,userInfo:n}))}}),r.a.createElement(d.b,{path:"/competitions/".concat(a.id,"/groups/general"),render:function(e){return r.a.createElement(Rt,Object.assign({},e,{wcif:a}))}}),r.a.createElement(d.b,{path:"/competitions/".concat(a.id,"/Groups/:wcaId"),render:function(e){return r.a.createElement(At,Object.assign({},e,{wcif:a,userInfo:n}))}}),"spectator"!==t&&r.a.createElement(d.a,{to:"/competitions/".concat(a.id,"/Groups/").concat(n.me.wca_id?n.me.wca_id:n.me.id)}),"spectator"===t&&r.a.createElement(d.a,{to:"/competitions/".concat(a.id,"/Groups/general")}))}var Ft=Object(vt.a)((function(e){return{root:{flexGrow:1},icon:{fontSize:20,padding:e.spacing(1),"&:hover":{opacity:.7,color:e.palette.primary.main}},iconSelect:{fontSize:20,padding:e.spacing(1),color:e.palette.primary.main,"&:hover":{opacity:.7}}}}));function Lt(e){var t=e.selected,a=void 0===t?[]:t,n=e.onClick,c=e.justify,o=e.events,i=e.alignment,l=void 0===i?"row":i,s=(e.size,e.user,e.userInfo,Ft());return r.a.createElement("div",{className:s.root},r.a.createElement(z.a,{container:!0,direction:l,justify:c},o.map((function(e){return r.a.createElement(z.a,{item:!0,key:e},r.a.createElement(E.a,{variant:"inherit",onClick:function(){return n(e)}},r.a.createElement("span",{className:(a.includes(e)?s.icon:s.iconSelect)+" cubing-icon event-".concat(e)})))}))))}var _t=a(28),Ht=a(80),Bt=a(314);function Jt(e){var t=e.venues,a=e.unselectedRooms,n=e.setUnselectedRooms,c=e.unselectedAssignments,o=e.setUnselectedAssignments;return r.a.createElement(z.a,{container:!0,direction:"column",spacing:2},r.a.createElement(z.a,{item:!0},t.map((function(e){return e.rooms.map((function(e){return r.a.createElement(Bt.a,{clickable:!0,onClick:function(){return t=e.id,void(a.includes(t)?n(a.filter((function(e){return e!==t}))):n([].concat(Object(qe.a)(a),[t])));var t},key:e.id,label:e.name,style:a.includes(e.id)?{}:{backgroundColor:e.color}})}))}))),r.a.createElement(z.a,{item:!0},["competitor","staff-judge","staff-runner","staff-scrambler"].map((function(e){return r.a.createElement(Bt.a,{clickable:!0,onClick:function(){return t=e,void(c.includes(t)?o(c.filter((function(e){return e!==t}))):o([].concat(Object(qe.a)(c),[t])));var t},key:e,label:it(e),color:c.includes(e)?"default":"primary"})}))))}var qt=Object(b.a)((function(e){return{root:{flexGrow:1,padding:e.spacing(2,3)},paper:{margin:e.spacing(2),padding:e.spacing(3),textAlign:"center"},card:{textAlign:"center",margin:e.spacing(2),maxHeight:"200px"}}})),Vt=function(e){return r.a.createElement(Ht.a.Appointment,Object.assign({},e,{style:{backgroundColor:e.data.activity.room.color}}))};function Kt(e){var t=e.myEvents,a=e.myAssignments,c=e.wcif,o=e.user,i=e.userInfo,l=qt(),s=Object(n.useState)([]),u=Object(Ce.a)(s,2),m=u[0],f=u[1],d=Object(n.useState)([]),p=Object(Ce.a)(d,2),g=p[0],E=p[1],h=Object(n.useState)([]),v=Object(Ce.a)(h,2),b=v[0],y=v[1],O=Object(n.useState)([]),w=Object(Ce.a)(O,2),j=w[0],C=w[1];Object(n.useEffect)((function(){C(lt(m,g,b,a,ot(c.schedule)))}),[m,g,b,a,c]);return r.a.createElement("div",{className:l.root},r.a.createElement(ht.a,{className:l.paper},r.a.createElement(Lt,{selected:m,onClick:function(e){m.includes(e)?f(m.filter((function(t){return!(t===e)}))):f([].concat(Object(qe.a)(m),[e]))},justify:"center",events:t,user:o,userInfo:i}),r.a.createElement(Jt,{venues:c.schedule.venues,unselectedRooms:g,setUnselectedRooms:E,unselectedAssignments:b,setUnselectedAssignments:y,changeFilter:function(){}}),r.a.createElement(Ht.c,{data:j},r.a.createElement(_t.n,{currentDate:c.schedule.startDate}),r.a.createElement(Ht.b,{startDayHour:8,endDayHour:19,cellDuration:30}),r.a.createElement(Ht.a,{appointmentComponent:Vt}))))}var Yt=a(312),Zt=a(301),Xt=a(298),$t=a(103),Qt=a.n($t),ea=a(299),ta=a(296),aa=a(297);function na(e){var t=e.room,a=e.onRoomChange,n=function(e){return function(n){a(Xe("ScheduleConfig",t,pe(Qe("ScheduleConfig",t),[e],n.target.value)))}},c=Qe("ScheduleConfig",t);return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{variant:"h6"},t.name),r.a.createElement(Mt.a,{id:"outlined-number",label:"Delay (minutes)",type:"number",InputLabelProps:{shrink:!0},value:c.delay,onChange:n("delay"),margin:"normal",variant:"outlined"}),r.a.createElement(Mt.a,{id:"outlined-multiline-static",label:"Pinned Messsage",type:"text",InputLabelProps:{shrink:!0},multiline:!0,rows:"4",value:c.pinnedMessage,onChange:n("pinnedMessage"),margin:"normal",variant:"outlined",helperText:"Use this if you would like to project a message at the competition. You might want to include WiFi details, lunch details among other stuff. Come back if you wish to add anything."}),r.a.createElement(ke.a,null))}var ra=Object(b.a)((function(e){return{root:{width:"100%"},title:{margin:e.spacing(3),textAlign:"center"},group:{justifyContent:"center"},link:{justifyContent:"center",maxWidth:200}}}));function ca(e){var t=e.wcif,a=e.setWcif,n=e.updateProjectorConfig,c=e.venues,o=e.id,i=function(e){console.log(e),a(de(t,["schedule","venues"],(function(t){return de(t,["rooms"],(function(t){return t.id===e.id?e:t}))})))},l=ra();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xt.a,null,r.a.createElement(ta.a,null,c.map((function(e){return e.rooms.map((function(e){return r.a.createElement(na,{key:e.id,room:e,onRoomChange:i})}))})),r.a.createElement(v.a,{className:l.title,variant:"h6",gutterBottom:!0},"Link to Projector Screens"),r.a.createElement(aa.a,{className:l.group},r.a.createElement(g.a,{className:l.link,variant:"outlined",href:"/project/".concat(o,"/all")},"Slideshow"),r.a.createElement(g.a,{className:l.link,variant:"outlined",href:"/project/".concat(o,"/pin")},"Pinned Messages"),c.map((function(e){return e.rooms.map((function(e){return r.a.createElement(g.a,{className:l.link,key:e.id,variant:"outlined",href:"/project/".concat(e.id)},e.name)}))}))))),r.a.createElement(ea.a,null,r.a.createElement(g.a,{size:"small",color:"primary",onClick:function(){n()}},"Save")))}var oa=a(295),ia=a(300),la=a(152),sa=a(290),ua=a(317);function ma(e){var t,a=e.wcif,n=e.setWcif,c=e.updateGeneralConfig,o=Qe("GeneralConfig",a),i=function(e){return function(t){n(Xe("GeneralConfig",a,pe(Qe("GeneralConfig",a),[e],t.target.checked))),console.log(a),console.log(Qe("GeneralConfig",a))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xt.a,null,r.a.createElement(ta.a,null,r.a.createElement(oa.a,{control:r.a.createElement(ia.a,{checked:o.useProjector,value:"useProjector",onChange:i("useProjector")}),label:"Use Projector"}),r.a.createElement(oa.a,{control:r.a.createElement(ia.a,{checked:o.useTelegramNotif,value:"useTelegramNotif",onChange:i("useTelegramNotif")}),label:"Use Telegram Notifications"}),r.a.createElement(oa.a,{control:r.a.createElement(ia.a,{checked:o.showGroups,value:"useGroups",onChange:i("useGroups")}),label:"Show Groups & Assignments"}),r.a.createElement(oa.a,{required:!0,style:{margin:20,minWidth:120},control:r.a.createElement("div",null,r.a.createElement(ua.a,{htmlFor:"group-tool-helper"},"Group Tool Used"),r.a.createElement(la.a,{value:o.groupTool,onChange:(t="groupTool",function(e){n(Xe("GeneralConfig",a,pe(Qe("GeneralConfig",a),[t],e.target.value)))})},r.a.createElement("option",{value:""},"None"),r.a.createElement("option",{value:"groupifier"},"Groupifier")),r.a.createElement(sa.a,null,"Select the tool you used to generate groups. Only programs that communicate with WCIF are usable. If not selected, competitors will be unable to view their groups and you will have to manually proceed groups on the projector."))}))),r.a.createElement(ea.a,null,r.a.createElement(g.a,{size:"small",color:"primary",onClick:function(){c()}},"Save")))}function fa(){return r.a.createElement("div",null)}var da=a(294),pa=Object(b.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},mainLoader:{position:"absolute",left:"55%",top:"50%"}}}));function ga(e){var t=e.user,a=e.wcif,c=e.setWcif,o=pa(),i=Object(n.useState)(a),l=Object(Ce.a)(i,2),s=l[0],u=l[1],m=Object(n.useState)(!1),f=Object(Ce.a)(m,2),d=f[0],p=f[1],g=function(){p(!0),console.log(s),je(a,s).then((function(){c(s),p(!1)})).catch((function(e){return r.a.createElement(Tt,{message:e})}))};return r.a.createElement("div",{className:o.root},d&&r.a.createElement(da.a,{size:50,className:o.mainLoader}),!d&&"admin"===t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Yt.a,null,r.a.createElement(Zt.a,{expandIcon:r.a.createElement(Qt.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(v.a,{className:o.heading},"General")),r.a.createElement(ma,{wcif:s,setWcif:u,updateGeneralConfig:g})),r.a.createElement(Yt.a,{disabled:!Qe("GeneralConfig",a).useProjector},r.a.createElement(Zt.a,{expandIcon:r.a.createElement(Qt.a,null),"aria-controls":"panel2a-content",id:"panel2a-header"},r.a.createElement(v.a,{className:o.heading},"Projector")),r.a.createElement(ca,{wcif:s,setWcif:u,updateProjectorConfig:g,venues:s.schedule.venues,id:s.id})),r.a.createElement(Yt.a,{disabled:!Qe("GeneralConfig",a).useTelegramNotif},r.a.createElement(Zt.a,{expandIcon:r.a.createElement(Qt.a,null),"aria-controls":"panel3a-content",id:"panel3a-header"},r.a.createElement(v.a,{className:o.heading}," ","Notifications")),r.a.createElement(Xt.a,null,r.a.createElement(fa,{wcif:s,setWcif:u,updateNotificationsConfig:g})))),"admin"!==t&&r.a.createElement(Tt,{message:"You are not an administrator"}))}var Ea=a(171),ha=a(3),va=a(160),ba=a.n(va),ya=a(79),Oa=a.n(ya),wa=a(302),ja=a(303),Ca=a(313),Ia=a(304),Sa=a(161),ka=a.n(Sa),xa={success:ba.a,warning:ka.a,error:Pt.a,info:_.a},Na=Object(b.a)((function(e){return{success:{backgroundColor:wa.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:ja.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function Pa(e){var t=Na(),a=e.className,n=e.message,c=e.onClose,o=e.variant,i=Object(Ea.a)(e,["className","message","onClose","variant"]),l=xa[o];return r.a.createElement(Ia.a,Object.assign({className:Object(ha.a)(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(l,{className:Object(ha.a)(t.icon,t.iconVariant)}),n),action:[r.a.createElement(E.a,{key:"close","aria-label":"close",color:"inherit",onClick:c},r.a.createElement(Oa.a,{className:t.icon}))]},i))}var Ta=Object(b.a)((function(e){return{margin:{margin:e.spacing(1)}}}));function Da(e){var t=e.variant,a=e.message,n=(Ta(),r.a.useState(!0)),c=Object(Ce.a)(n,2),o=c[0],i=c[1],l=function(e,t){"clickaway"!==t&&i(!1)};return r.a.createElement("div",null,r.a.createElement(Ca.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:o,autoHideDuration:6e3,onClose:l},r.a.createElement(Pa,{onClose:l,variant:t,message:a})))}var Aa=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).setWcif=function(e){return a.setState({wcif:e})},a.state={wcif:null,loadingWcif:!0,myEvents:[],extensionSetup:!1},"admin"===e.user?be(a.props.compId).then((function(e){return a.setState({wcif:e,loadingWcif:!1})})):ve(a.props.compId).then((function(e){return a.setState({wcif:e,loadingWcif:!1})})),"spectator"===e.user||a.state.loadingWcif||a.setState({myEvents:rt(e.userInfo,a.state.wcif),extensionSetup:et("GeneralConfig",a.state.wcif)}),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.wcif,n=t.loadingWcif,c=this.props,o=c.user,i=c.userInfo,l=c.compId;return r.a.createElement("div",null,!n&&et("GeneralConfig",a)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{path:"/competitions/".concat(a.id,"/overview"),render:function(e){return r.a.createElement(Kt,Object.assign({},e,{myEvents:rt(i,a),myAssignments:nt(i.me.wca_id,a),wcif:a,user:o,userInfo:i}))}}),r.a.createElement(d.b,{path:"/competitions/".concat(a.id,"/groups"),render:function(e){return r.a.createElement(zt,Object.assign({},e,{user:o,wcif:a,userInfo:i}))}}),r.a.createElement(d.b,{path:"/competitions/".concat(a.id,"/notifications"),render:function(e){return r.a.createElement(Je,e)}}),r.a.createElement(d.b,{path:"/competitions/".concat(a.id,"/admin"),render:function(t){return r.a.createElement(ga,Object.assign({},t,{user:o,wcif:e.state.wcif,setWcif:e.setWcif}))}})),!n&&!et("GeneralConfig",a)&&("admin"===o?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{to:"/competitions/".concat(l,"/admin")}),r.a.createElement(Da,{variant:"error",message:"Set up Admin information first"}),r.a.createElement(ga,{user:o,wcif:this.state.wcif,setWcif:this.setWcif})):r.a.createElement(Tt,{message:"TODO MAKE A useError HOOK!"})),n&&r.a.createElement(oe.a,null))}}]),t}(n.Component),Ga=Object(b.a)((function(e){return{root:{display:"flex"},drawer:Object(y.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(y.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(y.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)},footerPadding:{width:"100%",height:50}}}));var Wa=function(e){var t=e.match,a=(e.location,e.history),c=e.container,o=e.mobileOpen,i=e.setMobileOpen,l=e.userInfo,s=e.managableComps,u=e.upcomingComps,m=Ga(),f=function(e){e!==g&&(E(e),a.push("/competitions/".concat(t.params.compId,"/").concat(e,"/")))},d=Object(n.useState)("overview"),p=Object(Ce.a)(d,2),g=p[0],E=p[1],h=Object(n.useState)(s.filter((function(e){return e.id===t.params.compId})).length>0?"admin":u.filter((function(e){return e.id===t.params.compId})).length>0?"competitor":"spectator"),v=Object(Ce.a)(h,1)[0];return r.a.createElement("div",{className:m.root},r.a.createElement(te.a,null),r.a.createElement("nav",{className:m.drawer,"aria-label":"mailbox folders"},r.a.createElement(Se.a,{smUp:!0,implementation:"css"},r.a.createElement(Ie.a,{container:c,variant:"temporary",anchor:"left",open:o,onClose:i,classes:{paper:m.drawerPaper},ModalProps:{keepMounted:!0}},r.a.createElement("div",null,r.a.createElement("div",{className:m.toolbar}),r.a.createElement(Be,{user:v,onClick:f})))),r.a.createElement(Se.a,{xsDown:!0,implementation:"css"},r.a.createElement(Ie.a,{classes:{paper:m.drawerPaper},variant:"permanent",open:!0},r.a.createElement("div",null,r.a.createElement("div",{className:m.toolbar}),r.a.createElement(Be,{user:v,onClick:f}))))),r.a.createElement("main",{className:m.content},r.a.createElement(r.a.Fragment,null,r.a.createElement(Aa,{history:a,user:v,compId:t.params.compId,userInfo:l}),r.a.createElement("div",{className:m.footerPadding}))))},Ua=a(287),Ma=a(169),Ra=Object(Ma.a)(r.a,{useCssModules:!1});function za(e){var t=e.myUpcomingComps;return r.a.createElement(ht.a,null,r.a.createElement(xe.a,{subheader:r.a.createElement(Ua.a,null,"Upcoming Competitions")},t.map((function(e){return r.a.createElement(Ne.a,{alignItems:"flex-start",key:e.id,button:!0,component:f.b,to:"/competitions/".concat(e.id,"/overview")},r.a.createElement(Pe.a,{children:r.a.createElement(Ra,{size:"2x",code:e.country_iso2.toLowerCase()})}),r.a.createElement(Te.a,{key:e.id+"-about",primary:e.name,secondary:r.a.createElement(r.a.Fragment,{key:e.id+"-fragment"},r.a.createElement(v.a,{key:e.id+"date",component:"span",variant:"body2",color:"textPrimary"},he(e.start_date,e.end_date)))}))}))))}var Fa=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={allUpcomingComps:null,myManagableComps:null,loadingAll:!0,loadingMine:!0,myUpcomingComps:null},ye(a.props.userInfo.me.id).then((function(e){a.setState({myUpcomingComps:Ee(e.upcoming_competitions),loadingAll:!1})})),Oe().then((function(e){return a.setState({myManagableComps:Ee(e),loadingMine:!1})})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.myUpcomingComps,a=e.myManagableComps,n=e.loadingAll,c=e.loadingMine;return r.a.createElement(r.a.Fragment,null,!n&&!c&&r.a.createElement(za,{myUpcomingComps:t,myManagableComps:a}),c&&n&&r.a.createElement(oe.a,null))}}]),t}(n.Component),La=a(307),_a=Object(b.a)((function(e){return{box:{borderRadius:"25px",margin:"auto",height:"80vh",maxWidth:"80%",padding:e.spacing(2)},icon:{fontSize:"4vmax"},grid:{padding:e.spacing(3)}}}));function Ha(){var e=_a();return r.a.createElement(r.a.Fragment,null,r.a.createElement(La.a,{className:e.box,bgcolor:"background.paper"},r.a.createElement(z.a,{container:!0,className:e.grid,direction:"column",alignItems:"center",spacing:1},r.a.createElement(z.a,{item:!0},r.a.createElement(A.a,{className:e.icon})),r.a.createElement(z.a,{item:!0},r.a.createElement(v.a,{color:"textPrimary",variant:"h2"},"myComp")),r.a.createElement(z.a,{item:!0},r.a.createElement(v.a,{color:"textSecondary",variant:"subtitle2"},"Live WCA Competition Feedback Software"))),r.a.createElement(ke.a,null)))}var Ba=a(293),Ja=a(225),qa=a(308),Va=a(292),Ka=a(165),Ya=a.n(Ka),Za=a(166),Xa=a.n(Za),$a=a(168),Qa=a.n($a),en=a(167),tn=a.n(en),an=function(e,t){var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value,s=se()("2019-11-23T14:15:00Z");0===l.childActivities.length&&s.isBetween(se()(l.startTime).add(t[l.room.id],"minutes"),se()(l.endTime).add(t[l.room.id],"minutes"))&&a.push(l)}}catch(u){r=!0,c=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a},nn=Object(b.a)((function(e){return{root:{width:"100%"},title:{fontSize:"6vh"},paper:{backgroundColor:e.palette.background.paper},list:{backgroundColor:e.palette.background.paper}}}));function rn(e){var t=e.wcif,a=Object(n.useState)([]),c=Object(Ce.a)(a,2),o=c[0],i=c[1];Object(n.useEffect)((function(){var e=t.schedule.venues,a=[],n=!0,r=!1,c=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=o.value,u=!0,m=!1,f=void 0;try{for(var d,p=s.rooms[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var g=d.value;a.push(parseInt(Qe("ScheduleConfig",g).delay))}}catch(E){m=!0,f=E}finally{try{u||null==p.return||p.return()}finally{if(m)throw f}}}}catch(E){r=!0,c=E}finally{try{n||null==l.return||l.return()}finally{if(r)throw c}}i(a)}),[t]);var l=Object(n.useState)([]),s=Object(Ce.a)(l,2),u=s[0],m=s[1];Object(n.useEffect)((function(){m(an(ot(t.schedule),o))}),[o,t.schedule]);var f=nn();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{className:f.paper,square:!0,elevation:24},r.a.createElement(xe.a,{className:f.list,subheader:r.a.createElement(Ua.a,null,r.a.createElement(v.a,{align:"center",className:f.title},"Happening Now!"))},u&&u.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{style:{backgroundColor:e.room.color},alignItems:"center"},r.a.createElement(Te.a,{primary:e.name,secondary:"Jan 9, 2014"})),r.a.createElement(ke.a,null))})))))}function cn(){return r.a.createElement("div",null)}function on(){return r.a.createElement("div",null)}function ln(){return r.a.createElement("div",null)}function sn(){return r.a.createElement("div",null)}var un=Object(b.a)((function(e){return{logo:{maxHeight:150,maxWidth:100},section:{height:"100%"},root:{minWidth:"100%",height:"15%"},name:{fontSize:"calc(16px + 5vh)"},icon:{fontSize:"8vmin"},label:{fontSize:"4vmin"},toolbar:e.mixins.toolbar}})),mn=r.a.forwardRef((function(e,t){return r.a.createElement(Ja.a,Object.assign({direction:"up",ref:t},e))})),fn={AGENDA:Ya.a,COMPETING:Xa.a,INFO:_.a,SPOTLIGHT:tn.a,RESULTS:Qa.a},dn=function(e,t){return e===t-1?0:e+1},pn=function(e){switch(console.log(e),e){case"AGENDA":return 5e3;case"COMPETING":return 6e3;case"INFO":case"SPOTLIGHT":case"RESULTS":return 7e3;case void 0:return 2e3;default:return 5e3}};function gn(e){var t=e.match,a=Object(n.useState)(!0),c=Object(Ce.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(null),s=Object(Ce.a)(l,2),u=s[0],m=s[1],f=Object(n.useState)(null),d=Object(Ce.a)(f,2),p=d[0],g=d[1],E=Object(n.useState)(["AGENDA","COMPETING","INFO","SPOTLIGHT","RESULTS"]),h=Object(Ce.a)(E,1)[0],b=Object(n.useState)(-1),y=Object(Ce.a)(b,2),O=y[0],w=y[1],j=r.a.useRef(O);j.current=O;Object(n.useEffect)((function(){var e=setInterval((function(){be(t.params.compId).then((function(e){return m(e)})).catch((function(e){return g(e.message)})),w(dn(j.current,h.length)),i(!1)}),pn(h[j.current]));return function(){clearTimeout(e)}}),[t.params.compId,O,h]);var C=un();return r.a.createElement("div",null,o&&r.a.createElement(oe.a,null),p&&r.a.createElement(Tt,{message:p}),!o&&u&&r.a.createElement(Ba.a,{fullScreen:!0,open:!0,TransitionComponent:mn},r.a.createElement(z.a,{className:C.root,container:!0,justify:"space-around",direction:"row",alignItems:"center"},r.a.createElement(z.a,{item:!0},r.a.createElement(v.a,{className:C.name},u.name)),r.a.createElement(z.a,{item:!0},r.a.createElement(qa.a,{centered:!0,value:O},h.map((function(e){var t=fn[e];return r.a.createElement(Va.a,{key:e,label:r.a.createElement(v.a,{className:C.label},e),icon:r.a.createElement(t,{className:C.icon})})}))))),r.a.createElement("div",{className:C.toolbar}),function(){switch(h[O]){case"AGENDA":return r.a.createElement(rn,{wcif:u});case"COMPETING":return r.a.createElement(cn,{wcif:u});case"INFO":return r.a.createElement(on,{wcif:u});case"SPOTLIGHT":return r.a.createElement(sn,{wcif:u});case"RESULTS":return r.a.createElement(ln,{wcif:u});default:return r.a.createElement(Tt,null)}}()))}var En={fontFamily:["Playfair Display","Open Sans",'"Helvetica Neue"','"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},hn={palette:{primary:ne.a,secondary:ce.a,type:"dark"},typography:En},vn={palette:{primary:ne.a,secondary:ce.a,type:"light"},typography:En},bn=function(e){function t(e){var a;return Object(i.a)(this,t),console.log("hello"),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).setMobileOpen=function(){a.setState({mobileOpen:!a.state.mobileOpen})},a.onSignOut=function(){a.setState({userInfo:null,signedIn:!1,loadingAll:!0,loadingAdmin:!0}),P()},a.toggleDarkTheme=function(){var e="light"===a.state.theme.palette.type?hn:vn;a.setState({theme:e})},a.state={userInfo:a.props.userInfo,signedIn:T(),theme:hn,mobileOpen:!1,upcomingComps:null,managableComps:null,loadinAdmin:!0,loadingAll:!0},a.state.signedIn&&(ye(a.state.userInfo.me.id).then((function(e){return a.setState({upcomingComps:Ee(e.upcoming_competitions),loadingAll:!1})})),Oe(a.state.userInfo.me.id).then((function(e){return a.setState({managableComps:Ee(e),loadingAdmin:!1})}))),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.signedIn,n=t.userInfo,c=t.theme,o=t.mobileOpen,i=t.upcomingComps,l=t.managableComps,s=t.loadingAdmin,u=t.loadingAll,m=Object(Q.a)(c);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{theme:m},r.a.createElement(te.a,null),r.a.createElement(f.a,{basename:""},r.a.createElement(R,{userInfo:n,onSignOut:this.onSignOut,setMobileOpen:this.setMobileOpen}),(u||s)&&a&&r.a.createElement(oe.a,null),u||s||!a?r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(Ha,e)}}),r.a.createElement(d.b,{path:"/project/:compId",component:gn})):r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"".concat("","/competitions"),render:function(e){return r.a.createElement(Fa,Object.assign({},e,{userInfo:n}))}}),r.a.createElement(d.b,{path:"/project/:compId",component:gn}),r.a.createElement(d.b,{path:"/competitions/:compId/",render:function(t){return r.a.createElement(Wa,Object.assign({},t,{userInfo:n,mobileOpen:o,setMobileOpen:e.setMobileOpen,managableComps:l,upcomingComps:i}))}}),r.a.createElement(d.b,{exact:!0,path:"/"},r.a.createElement(d.a,{to:"/competitions"})))),r.a.createElement($,{currTheme:c.palette.type,onThemeChange:this.toggleDarkTheme})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));!function(){var e=window.location.hash.replace(/^#/,""),t=new URLSearchParams(e);if(t.has("access_token")&&localStorage.setItem(S("accessToken"),t.get("access_token")),t.has("expires_in")){var a=t.get("expires_in")-900,n=new Date((new Date).getTime()+1e3*a);localStorage.setItem(S("expirationTime"),n.toISOString())}var r=localStorage.getItem(S("expirationTime"));r&&new Date>=new Date(r)&&P(),t.has("access_token")&&C.replace(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(a,!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},C.location,{hash:null}));var c=localStorage.getItem(S("redirectPath"));c&&(window.location.replace(c),localStorage.removeItem(S("redirectPath")));var o=window.location.pathname;"/"===o||T()||(localStorage.setItem(S("redirectPath"),o),x())}(),T()?we("/me").then((function(e){o.a.render(r.a.createElement(bn,{userInfo:e}),document.getElementById("root"))})):o.a.render(r.a.createElement(bn,{userInfo:{}}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[203,1,2]]]);
//# sourceMappingURL=main.747a6ea2.chunk.js.map